## 쿠키와 세션

쿠키(Cookies)와 세션(Sessions)은 사용자의 상태 정보를 웹 서버에 저장하여 웹 애플리케이션의 연속성과 상태 유지 관리를 가능하게 하는 기술입니다. 이 두 기술은 웹 개발에서 사용자 식별, 로그인 상태 유지, 사용자 선호도 저장 등에 널리 사용됩니다.

### 쿠키(Cookies)

#### 개념 및 특징
- 쿠키는 클라이언트(브라우저)에 텍스트 형태로 저장되는 작은 정보 조각입니다.
- 웹 서버가 HTTP 응답 헤더를 통해 클라이언트에 쿠키를 전송하고, 이후 클라이언트는 동일한 서버로 요청을 할 때마다 쿠키 정보를 HTTP 요청 헤더에 포함시켜 전송합니다.
- 쿠키는 사용자의 선호, 세션 토큰, 그리고 다른 필요한 데이터를 저장하기 위해 사용됩니다.
- 쿠키에는 만료 날짜가 있으며, 설정에 따라 브라우저를 종료해도 계속 유지될 수 있습니다.

#### 관련 객체 및 메소드
```java
// 쿠키 생성 및 설정
Cookie cookie = new Cookie("user", "JohnDoe");
cookie.setMaxAge(60*60*24); // 쿠키를 24시간 동안 유지
response.addCookie(cookie);

// 쿠키 읽기
Cookie[] cookies = request.getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        if ("user".equals(cookie.getName())) {
            String userName = cookie.getValue();
        }
    }
}
```

### 세션(Sessions)
- 세션은 서버 측에서 사용자 정보를 저장하는 방식으로, 각 클라이언트에 대해 유일한 세션 ID를 할당합니다.
- 세션 ID는 일반적으로 쿠키를 통해 클라이언트에 전달되며, 클라이언트는 이후 요청에서 이 ID를 서버에 전송하여 자신을 식별합니다.
- 세션은 사용자 별로 서버 메모리에 정보를 저장하기 때문에, 쿠키보다 보안이 강화됩니다. 하지만, 많은 양의 세션 데이터는 서버의 메모리를 소모할 수 있습니다.
- 세션은 로그인 정보와 같이 민감한 데이터를 저장하는 데 적합합니다.

#### 관련 객체 및 메소드
```java
// 세션 생성 및 데이터 저장
HttpSession session = request.getSession();
session.setAttribute("user", "JohnDoe");

// 세션에서 데이터 읽기
HttpSession session = request.getSession(false);
if (session != null) {
    String userName = (String) session.getAttribute("user");
}

// 세션 종료
HttpSession session = request.getSession(false);
if (session != null) {
    session.invalidate();
}
```

  ### 쿠키와 세션의 차이점

1. **저장 위치**
   - **쿠키**: 클라이언트 측(브라우저)에 데이터 저장. 사용자의 컴퓨터에 직접 파일 형태로 저장됩니다.
   - **세션**: 서버 측에 데이터를 저장. 서버의 메모리에서 관리되며, 클라이언트에는 유니크한 세션 ID만 전송됩니다.

2. **보안**
   - **쿠키**: 클라이언트에 저장되므로 상대적으로 취약할 수 있습니다. 중요한 정보는 암호화하거나 쿠키 대신 세션을 사용하여 저장해야 합니다.
   - **세션**: 서버에 저장되므로 쿠키보다 보안이 더 우수합니다. 민감한 정보를 다룰 때 선호됩니다.

3. **생명주기**
   - **쿠키**: 개발자가 설정한 만료 날짜가 있으며, 만료 날짜까지 데이터를 유지할 수 있습니다. 브라우저를 종료해도 데이터가 유지될 수 있습니다.
   - **세션**: 사용자가 브라우저를 종료하거나 명시적으로 세션을 종료하기 전까지 유지됩니다. 일정 시간 동안 활동이 없으면 자동으로 만료될 수 있습니다.

4. **용량 제한**
   - **쿠키**: 각 쿠키는 약 4KB의 데이터만 저장할 수 있습니다.
   - **세션**: 이론적으로는 서버의 메모리 용량이 허용하는 한 많은 데이터를 저장할 수 있습니다. 그러나 대량의 세션 데이터는 서버의 성능에 영향을 줄 수 있습니다.

### 장단점

#### 쿠키의 장단점

- **장점**:
  - 간단한 정보를 클라이언트 측에 유지하여 서버의 부하를 줄일 수 있습니다.
  - 사용자의 선호도나 로그인 상태 등을 유지하는 데 적합합니다.
- **단점**:
  - 보안에 취약할 수 있으며, 사용자가 쿠키를 삭제하거나 차단할 수 있습니다.
  - 각 쿠키의 크기와 도메인 당 저장할 수 있는 쿠키의 수에 제한이 있습니다.

#### 세션의 장단점

- **장점**:
  - 서버 측에서 관리되므로 보안성이 더 높습니다.
  - 큰 용량의 데이터를 저장할 수 있으며, 사용자별로 다른 정보를 관리할 수 있습니다.
- **단점**:	
  - 모든 사용자 정보를 서버에서 관리해야 하므로 서버의 리소스를 많이 소모할 수 있습니다.
  - 사용자가 많을 경우 세션 관리가 서버의 성능에 영향을 줄 수 있습니다.

